<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <title>API</title>

  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@100;400;900&family=Roboto+Slab:wght@100;900&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="css/styles.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>

</head>

<body>
  <!-- Navegation Bar -->
  <div class="bar-bar">
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <div class=" container-fluid">
        <a class="navbar-brand amanda-display" href="index.html">
          <img class="image-start" src="aalogo.png" alt="llama">
          Amanda Atsumi</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNavDropdown">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item"><a class="nav-link" href="index.html">üè†</a></li>
            <li class="nav-item"><a class="nav-link" href="bootstrap.html">Boostrap</a></li>
            <li class="nav-item"><a class="nav-link" href="indexjs.html">Javascript</a></li>
            <li class="nav-item"><a class="nav-link" href="positioning.html">Positioning</a></li>
            <li class="nav-item"><a class="nav-link" href="indexjq.html">jQuery</a></li>
            <li class="nav-item"><a class="nav-link" href="commandline.html">Command Line</a></li>
            <li class="nav-item"><a class="nav-link" href="node.html">Node JS</a></li>
            <li class="nav-item"><a class="nav-link" href="api.html">API</a></li>
          </ul>
        </div>
      </div>
    </nav>
  </div>

  <!-- Content -->
  <img class="bib" src="https://media.giphy.com/media/MnGVjwqus96GuaL0PL/giphy.gif" alt="">
  <div class="side-content">
    <div class="tops">
      <h1 class="h11" id="node-part">API</h1>
      <h6>Application Programing Interfaces</h6>
    </div>
    <div class="colored1">
      <h2>Introduction to API</h2>
      <ul>
        <li>APIs are used to interact with external systems or servers</li>
        <li>It is a contract between the data provider and the developer determining the boundaries to change and manipulate data</li>
        <li>There are 4 things that need to be considered when discussing APIs</li>
        <ol>
          <li><Strong>Endpoint:</Strong> Every API interacting with a external system or server will have an endpoints</li>
          <li><Strong>Paths:</Strong> They are the new pages we create after the root of the server</li>
          <li><Strong>Parameters:</Strong> Specifics used to narrow down the data</li>
          <li><Strong>Authentication</Strong></li>
          <li>htttps://aaaaaa.com/path<strong>?</strong>parameters</li>
          <li>h ttps://v2.jokeapi.dev/joke/Programming<strong>?</strong>blacklistFlags<strong>=</strong>nsfw<strong>&</strong>format=xml<strong>&</strong>contains<strong>=</strong>api</li>
          <li>The first query of the parameters has a <strong>?</strong> and the other ones <strong>&</strong></li>
          <li>To change the temperature that is usually in Kelvin, you need to add the parameter <strong>&units=metric</strong></li>
        </ol>
        <li><Strong><a href="https://web.postman.co/home">Postman</a></Strong> is used to test APIs</li>
        <ul>
          <li>It translates everything to a Json format</li>
        </ul>
      </ul>
    </div>
    <div class="colored2">
      <h2>JSON format</h2>
      <ul>
        <li>It is the JavaScript Object Notation</li>
        <li>You download the extension on Google</li>
        <li>When you open any page in html or XML it will open in Json format</li>
        <li>It is possible to visualize as Three, Chart, or Jason Input </li>
      </ul>
    </div>
    <div class="colored1">
      <h2>HTTPS Module</h2>
      <ul>
        <li>This is the native <a href="https://nodejs.org/api/https.html">https node module</a></li>
        <li>https.get(url[, options][, callback])</li>
      </ul>
      <ul class="example">const express = require("express");</ul>
      <ul class="example">const https = require("https");</ul>
      <ul class="example">const app = express();</ul>
      <ul class="example">app.get("/", function(req, res){</ul>
      <ul class="example">const url ="https://api.openweathermap.org/data/2.5/weather?q=toronto&appid=fc91739e43bc2e07dc9a973c9fa77283&units=metric"</ul>
      <ul class="example">https.get(url, function(response){</ul>
      <ul class="example">console.log(response); });</ul>
      <ul class="example">res.send("All set"); });</ul>
      <ul class="example">app.listen(3000, function(){</ul>
      <ul class="example">console.log("Server is running on Port 3000");</ul>
      <ul class="example">});</ul>
      <li>If you set console.log for <strong>(response.statusCode)</strong>, after refresh the local server, it will show the Status code <strong>200</strong> on Hyper</li>
      <li>The HTTP response Status codes show the compleness of requests and the classes of responses are:</li>
      <ol>
        <li><em>Informational responses (100‚Äì199)</em></li>
        <li><em>Successful responses (200‚Äì299)</em></li>
        <ul><strong>200 is ok</strong></ul>
        <li><em>Redirects (300‚Äì399)</em></li>
        <li><em>Client errors (400‚Äì499)</em></li>
        <ul><strong>404 the server cannot find the request resource</strong></ul>
        <ul><strong>401 unauthorized request, when an authentication is incorrect</strong></ul>
        <li>Server errors (500‚Äì599)</li>
        <li>For more information about the status codes, clique <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status">here</a></li>
      </ol>
    </div>
    <div class="colored2">
      <h2>Calling <strong>ON</strong> Method (unpacking)</h2>
      <ul>Search through the call on method for some data</ul>
      <ul>
        <ul>response.on("data", function(data){</ul>
        <ul>console.log(data);</ul>
        <ul>The <strong>"data" means, when we receive some data, we call the callback function that contains the <strong>data</strong>, and log the data </strong></ul>
      </ul>
      <ul>It will return code 200 and some hexidecimal code representing the data. To convert it into JavaScript object</ul>
      <ul>
        <ul>response.on("data", function(data){</ul>
        <ul>const weatherData = JSON.parse(data)</ul>
        <ul>console.log(weatherData);</ul>
        <ul>The <strong>"data" means, when we receive some data, we call the callback function that contains the <strong>data</strong>, and log the data </strong></ul>
      </ul>
      <br>
      <h2>Stringify Method (packing)</h2>
      <ul>It is the opposite of the JSON.parse method, because it converts Javascript data into string data</ul>
      <ul>
        <ul>response.on("data", function(data){</ul>
        <ul>const data = {
          <ul>name: "Amanda"</ul>
          <ul>city: "Toronto"</ul>
          <ul>}</ul>
          <ul>console.log(data);</ul>
          <ul>And it will return the data in string format</ul>
        </ul>
    </div>
    <div class="row">
      <div class="col-lg-6 colored1">
        <h2>Pulling Specific part of data from the code</h2>
        <ul>
          <ul>response.on("data", function(data){</ul>
          <ul>const weatherData = JSON.parse(data)</ul>
          <ul>cont temp = weatherData.main.temp</ul>
          <ul>console.log(temp);</ul>
          <ul>If you use the extension <a href="https://chrome.google.com/webstore/detail/json-viewer-pro/eifflpmocdbdmepbjaopkkhbfmdgijcc">JSON</a> you can open the website where you are collecting the data, go to the line of the information you
            want
            and copy the path. It will give you the <strong>.main.temp</strong> information</ul>
        </ul>
      </div>
      <div class="col-lg-6 colored1">
        <h2>To have more than one <strong>res.send</strong> information in the JavaScript</h2>
        <ul>Create <strong>res.write(text)</strong> for all lines of information you want</ul>
        <ul></ul>
      </div>
    </div>



    <div class="colored2">
      <div>
        <h2>Weather Project with API</h2>
      </div>
      <div class="row">
        <div class="col-lg-6">
          <ul class="example">app.get("/", function(req, res){</ul>
          <ul>const url ="https://api.openweathermap.org/data/2.5/weather?q=toronto&appid=fc91739e43bc2e07dc9a973c9fa77283&units=metric"</ul>
          <ul class="example">https.get(url, function(response){</ul>
          <ul class="example">console.log(response.statusCode);</ul>
          <ul class="example">response.on("data", function(data){</ul>
          <ul class="example">const weatherData = JSON.parse(data)</ul>
          <ul class="example">const temp = weatherData.main.temp</ul>
          <ul class="example">const feelsLike = weatherData.main.feels_like</ul>
          <ul> const imgURL = "http://openweathermap.org/img/wn/" + icon + "@2x.png"</ul>
          <ul>res.write("< h1>Temperature in Toronto is " + temp +"&degC, and it feels like " + feelsLike + "&degC!</h1>")</ul>
          <ul class="example">res.write("< h3>Currently, you have " + weatherDescription +"!</h3>");</ul>
          <ul class="example">res.write("< img src='" + imgURL +"'>");</ul>
          <ul class="example">res.send();</ul>
          <ul class="example">})})})</ul>
        </div>
        <div class="col-lg-6">
          <ul>Create the app.get("/", function(req, res){</ul>
          <ul>Create a <strong>Const</strong> with the source of the information</ul>
          <ul>Create <strong>get</strong> method to use part of data from the source</ul>
          <ul>The <strong>statusCode</strong> will help to check on Hyper the type of problems you could encounter</ul>
          <ul>The data coming from the source in hexidecimal format, and <strong>response.on</strong> transform it JavaScript</ul>
          <ul>The consts inside the response.on are the piece of data you want to access</ul>
          <ul>The <strong>res.write()s</strong> are the information that will be shared in the server</ul>
          <ul>The <strong>res.sedn();</strong> still need to be used though</ul>
          <ul>(app.listen) still needed to be created as well</ul>
        </div>
      </div>
    </div>
    <div class="colored1">
      <h2>Body Parser and API</h2>
      <ul></ul>
      <ul>It looks through the body of the post request and fectch the data based on the input</ul>
      <ul>It is installed to the JavaScript using <strong>npm i body-parser</strong></ul>
      <ul>Create Consts for the parts of the source link that changes, as the ID, City, and units</ul>
      <ul>The HTML needs to have a form with <strong>post</strong> method and the action needs to refer to the local server <strong>"/"</strong></ul>
      <li>The server will collect the information using <strong>app.post</strong></li>
      <li>It needs to be required with <strong>const bodyParser = requre(body-parser)</strong></li>
      <li>And a <strong>app.use(bodyParser.urlencoded({extended: true}))</strong></li>
      <li>Finally, use on app.post a const with the information collected from the form <strong>const query = req.body.cityName</strong></li>
    </div>
    <div class="row">
      <div class="col-lg-6 colored2">
        <h2>Linking HTML to server</h2>
        <ul>To link the html file to the server, you need to use <strong>res.sendFile(__dirname + "/html-file-name.html</strong> inside the app.get</ul>
        <ul>
          <ul>app.get("/", function(req, res){</ul>
          <ul>res.sendFile(__dirname + "/signup.html")</ul>
          <ul>})</ul>
        </ul>
      </div>
      <div class="col-lg-6 colored2">
        <h2>Linking CSS to the server - Static Elements</h2>
        <ul>
          <li>It is necessary to use <strong>app.use(express.static("public"));</strong></li>
          <li>Public is the name of the Folder where the folders CSS and Images are saved</li>
          <li>Images and the CSS styles are considered <strong>stratic elements</strong>, and express has this method to apply it to the server</li>
        </ul>
      </div>
    </div>
    <div class="colored1">
      <h2>Send data to the server</h2>
      <ul>It it necessary to use body Parser</ul>
      <ul>
        <li>Make the project use Body Parser with <strong>app.use(bodyParser.urlencoded({extended: true}));</strong></li>
        <li>Create an app.post as <strong>app.post("/", function(req, res){...})</strong></li>
        <li>Create a variable for each input in the form created in the HTML File</li>
        <li>Lastly, create a console.log to bring the variables created</li>
      </ul>
    </div>
    <div class="row">
      <div class="colored2 col-lg-6">
        <p>The Javascript code is</p>
        <ul class="example">const express = require("express");</ul>
        <ul class="example">const bodyParser = require("body-parser");</ul>
        <ul class="example">const request = require("request");</ul>
        <ul class="example">const https = require("https");</ul>
        <ul class="example">const app = express();</ul>
        <ul class="example">app.use(express.static("public"));</ul>
        <ul class="example">app.use(bodyParser.urlencoded({extended: true}));</ul>
        <ul class="example">app.get("/", function(req, res) {</ul>
        <ul class="example">res.sendFile(__dirname + "/signup.html");});</ul>
        <ul class="example">app.post("/", function(req, res) {</ul>
        <ul class="example">var firstName = req.body.fName;</ul>
        <ul class="example">var lastName = req.body.lName;</ul>
        <ul class="example">var email = req.body.email;</ul>
        <ul class="example"> >>>> Javascript sent to Mailchimp <<<< </ul>
            <ul class="example">var data = {</ul>
            <ul class="example">members: [</ul>
            <ul class="example">{</ul>
            <ul class="example">email_address: email,</ul>
            <ul class="example">status: "subscribed",</ul>
            <ul class="example">merge_fields: {</ul>
            <ul class="example">FNAME: firstName,</ul>
            <ul class="example">LNAME: lastName,</ul>
            <ul class="example">} } ] }</ul>
            <ul class="example"> >>>> Transform it into String <<<< </ul>
                <ul class="example">var jsonData = JSON.Stringify(data);</ul>
                <ul class="example"> >>>> Link to the Mailchimp list ID <<<< </ul>
                    <ul class="example">const url = us1.api.mailchimp.com / 3.0 / lists / b49c1742e8</ul>
                    <ul class="example">const options = {</ul>
                    <ul class="example">method: "POST",</ul>
                    <ul class="example">auth: "amanda1:11fd00ef6cab2818feed21bf4446e1e5-us1"}</ul>
                    <ul class="example">const request = https.request(url, option, function(response) {</ul>
                    <ul class="example">response.on("data", function(data) {</ul>
                    <ul class="example">console.log(JSON.parse(data));});})</ul>
                    <ul class="example">request.write(jsonData);</ul>
                    <ul class="example">request.end();});</ul>
                    <ul class="example">app.listen(3000, function() {</ul>
                    <ul class="example">console.log("Served on Port 3000!");})</ul>
                    <br>
                    <h2>Mailchimp API</h2>
                    <ul>Create an account in <a href="https://mailchimp.com/">MailChimp</a></ul>
                    <ul>
                      <li>We need the API key (MailChimp > Profile > Extras > API Keys)</li>
                      <ul>You can use the creation in the <strong>list session</strong> to add subscribers to the list</ul>
                      <ul>
                        <li>The <strong>list id</strong> allows you to provide the members you want to subscribe in the body of the request</li>
                        <li>To obtain the list id Audience > Manage Audience > Settings > and the unique id is in the bottom</li>
                      </ul>
                    </ul>
      </div>
      <div class="colored2 col-lg-6">

        <h2>To link Mailchimp</h2>
        <ul>Create inside the app.post a <strong>var data</strong> with key values</ul>
        <li>The format is described on <a href="https://mailchimp.com/developer/marketing/api/lists/batch-subscribe-or-unsubscribe/">Mailchimp</a></li>
        <li>It is necessary a <strong>var data = {Write the key value paths}</strong></li>
        <li>The data is sent to mailchip by the Body Parameters using the key path members</li>
        <li>The key path members are <strong>arrays</strong> of objects. It allows send up to 500 at the same time</li>
        <p>To Turn it into flat pack Json</p>
        <ul>var jsonData = JSON.stringify(data);</ul>
        <p>It is necessary to use a HTTPS Request</p>
        <ul>
          <li>Add a <strong>const https = required("https");</strong> at the top of the Javascript to use this package</li>
          <li>The code reference is in <a href="https://mailchimp.com/developer/marketing/docs/methods-parameters/">Method & Parameters</a> at Mailchimp</li>
          <li>After the jsonData, add the variables/const url that will be reference to the information sent to Mailchimp (url)</li>
          <ul>
            <li>Obtain the url template from Mailchip in the Partial responses part</li>
            <li><strong>usX.api.mailchimp.com/3.0/lists/{list_id}?fields=name</strong></li>
            <li>Change the <strong>usX</strong> for the number <strong>us1</strong> at the end of your API key</li>
            <li>After <strong>lists/</strong> enter the <strong>id list</strong></li>
          </ul>
          <li>Add the variable/const options</li>
          <ul>const options = {</ul>
          <ul>method: "POST",</ul>
          <ul>auth: any-name <strong>:</strong>"API Key Mailchimp" ==> It is the authentication form</ul>
          <ul><strong>res.redirect</strong> enable to add a button with "try again" message and sends the user back to the signup page</ul>
      </div>
    </div>
    <div class="colored1">
      <h2>Deploying your server</h2>
      <ul>Github is considered a static content</ul>
      <ul><a href="https://www.heroku.com/">Heroku</a> is a free server</ul>
      <ul>Choose the option that matches your code. In my is <strong>Node.js</strong></ul>
      <ul>To install the package use <strong>brew install heroku/brew/heroku</strong> but check the instructions to confirm</ul>
      <ul>To login type <strong>heroku login</strong> it will send you to other page, and confirm in the browser</ul>
      <ul>change the Port <strong>"3000"</strong> to enable Heroku use their Port <strong>process.env.PORT</strong> in the app.listen</ul>
      <ul>
        <li>This would not enable it to run into the local server anymore</li>
        <li>To make it run in Heroku and in the local server it is necessary to replace the 3000 for <strong>process.env.PORT || 3000</strong></li>
      </ul>
      <ul>It needs to create a file called <strong>Procfile</strong> that will show to Heroku how to launch the app</ul>
      <ul>
        <li>In the Procfile file type <strong>web: node app.js</strong> or the code and the app name</li>
      </ul>
      <ul>To save the File</ul>
      <ul>
        <li>Make sure you are in the folder of the app</li>
        <li>Enter on Hyper <strong>git init</strong>, then <strong>git add</strong>, and finally <strong>git commit -m "any comment"</strong></li>
      </ul>


    </div>
    <div class="colored2">
      <h2></h2>


    </div>
    <div class="colored1">
      <h2></h2>

    </div>
    <div class="colored2">
      <h2></h2>


    </div>
    <div class="colored3">
      <h2>Summary</h2>
      <div class="row">
        <div class="col-lg-6">
          <ol>
            <li>npm init</li>
            <li>npm install body-parser express request</li>
            <li>Require the Packages installed with <strong>const</strong></li>
            <ul>
              <li>Express needs a app <strong>constr app = express();</strong></li>
            </ul>
            <ul>const express = require("express");</ul>
            <ul>const bodyParser = require("body-parser");</ul>
            <ul>const request = require("request");</ul>
            <ul>const app = express();</ul>
            <li>Tell the app to use the package with <strong>app.use()</strong>. Each package has yours</li>
            <ul>app.use(express.static("public"));</ul>
            <ul>app.use(bodyParser.urlencoded({extended: true}));</ul>
            <li><strong>app.get()</strong> The get Route sends the browser a information when the user tries to access the home route</li>
            <li><strong>app.post()</strong> allows you to collect the information logged</li>
            <li><strong>app.listen()</strong> links the project to the Port. It refers to the "/" and function</li>
            <ul>It refers to the inputs from HTML as a <strong>var</strong></ul>
          </ol>
        </div>
        <div class="col-lg-6">
          <p>const express = require("express"); <br>
            const bodyParser= require("body-parser");<br>
            <br>
            const app = express();<br>
            <br>
            app.get("/", function(req, res){<br>
            res.send("Working To Do List");<br>
            });<br>
            <br>
            app.listen(3000,function(){<br>
            console.log("Server started on Port 3000");<br>
            });
          </p>
          <p>Use <strong>npx kill-port 3000</strong> To kill the connection with Port 3000</p>
        </div>
      </div>









    </div>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.1/dist/umd/popper.min.js" integrity="sha384-SR1sx49pcuLnqZUnnPwx6FCym0wLsk5JZuNx2bPPENzswTNFaQU1RDvt3wT4gWFG" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.min.js" integrity="sha384-j0CNLUeiqtyaRmlzUHCPZ+Gy5fQu0dQ6eZ/xAww941Ai1SxSY+0EQqNXNE6DZiVc" crossorigin="anonymous"></script>

</body>
<footer class="footin">
  <p>¬© 2021 Amanda Atsumi</p>
</footer>

</html>
